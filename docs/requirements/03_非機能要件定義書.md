# 非機能要件定義書

## 文書情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | Multi-Mode Calculator |
| 文書バージョン | 1.0 |
| 作成日 | 2025-12-11 |
| 最終更新日 | 2025-12-11 |

---

## 1. 性能要件

### NFR-001: 計算応答時間

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-001 |
| 要件名 | 計算応答時間 |
| 優先度 | 必須 |

**要件：**
システムは、ユーザーの操作に対して以下の応答時間を満たす。

| 操作 | 応答時間 |
|------|---------|
| ボタン押下から表示反映 | 50ms以内 |
| 四則演算の計算結果表示 | 100ms以内 |
| 関数計算の結果表示 | 200ms以内 |
| 進数変換の結果表示 | 100ms以内 |
| テーマ切り替え | 300ms以内 |

---

### NFR-002: 初期表示時間

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-002 |
| 要件名 | 初期表示時間 |
| 優先度 | 必須 |

**要件：**
システムは、ブラウザでアクセスしてから操作可能な状態になるまで2秒以内とする。

---

### NFR-003: メモリ使用量

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-003 |
| 要件名 | メモリ使用量 |
| 優先度 | 任意 |

**要件：**
システムは、通常使用時にブラウザのメモリ使用量を50MB以下に抑える。

---

## 2. 可用性要件

### NFR-004: オフライン動作

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-004 |
| 要件名 | オフライン動作 |
| 優先度 | 必須 |

**要件：**
システムは、インターネット接続がない状態でも全ての機能が動作する。

**実現方法：**
- サーバー通信を行わない設計
- ローカルファイルとして実行可能

---

### NFR-005: ブラウザ互換性

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-005 |
| 要件名 | ブラウザ互換性 |
| 優先度 | 必須 |

**要件：**
システムは、以下のブラウザの最新版で正常に動作する。

| ブラウザ | 対応バージョン |
|----------|---------------|
| Google Chrome | 最新版 |
| Mozilla Firefox | 最新版 |
| Microsoft Edge | 最新版 |
| Safari | 最新版 |

---

## 3. 使用性要件

### NFR-006: 直感的操作

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-006 |
| 要件名 | 直感的操作 |
| 優先度 | 必須 |

**要件：**
- ユーザーがマニュアルなしで基本操作を行える
- 一般的な電卓と同様のボタン配置を採用する
- アイコンとラベルを併用し、機能を明確に示す

---

### NFR-007: 視認性

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-007 |
| 要件名 | 視認性 |
| 優先度 | 必須 |

**要件：**
- ディスプレイの文字サイズは最低24px以上とする
- 数字と演算子は明確に区別できる配色とする
- ライトモード・ダークモード両方でコントラスト比4.5:1以上を確保する

---

### NFR-008: アクセシビリティ

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-008 |
| 要件名 | アクセシビリティ |
| 優先度 | 任意 |

**要件：**
- 全てのボタンにaria-label属性を設定する
- キーボードのみで全ての操作が可能とする
- フォーカス状態を視覚的に明示する

---

## 4. 保守性要件

### NFR-009: コード構造

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-009 |
| 要件名 | コード構造 |
| 優先度 | 必須 |

**要件：**
- HTML、CSS、JavaScriptを分離する
- 各機能をモジュール化する
- 適切なコメントを記述する

**ファイル構成：**
```
src/
├── index.html          # メインHTML
├── css/
│   ├── main.css        # 基本スタイル
│   ├── themes.css      # テーマ定義
│   └── responsive.css  # レスポンシブ対応
├── js/
│   ├── main.js         # エントリーポイント
│   ├── calculator.js   # 計算ロジック
│   ├── display.js      # 表示制御
│   ├── history.js      # 履歴管理
│   ├── themes.js       # テーマ管理
│   └── keyboard.js     # キーボード制御
└── themes/
    └── (テーマ別CSS)
```

---

### NFR-010: 拡張性

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-010 |
| 要件名 | 拡張性 |
| 優先度 | 任意 |

**要件：**
- 新しいテーマを容易に追加できる構造とする
- 新しい計算機能を追加しやすい設計とする
- CSSカスタムプロパティを使用し、スタイルの変更を容易にする

---

## 5. セキュリティ要件

### NFR-011: 入力検証

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-011 |
| 要件名 | 入力検証 |
| 優先度 | 必須 |

**要件：**
- eval()関数を使用しない
- ユーザー入力を直接HTML/JavaScriptとして解釈しない
- 数値以外の入力を適切にフィルタリングする

---

### NFR-012: データ保存

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-012 |
| 要件名 | データ保存 |
| 優先度 | 必須 |

**要件：**
- 外部サーバーへのデータ送信を行わない
- ローカルストレージへの保存データは最小限とする
- 機密情報を含まない

---

## 6. 移植性要件

### NFR-013: 標準技術の使用

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-013 |
| 要件名 | 標準技術の使用 |
| 優先度 | 必須 |

**要件：**
- Web標準（HTML5, CSS3, ES6+）のみを使用する
- ブラウザ固有の機能（vendor prefix）は必要最小限とする
- 外部ライブラリ・フレームワークを使用しない

---

### NFR-014: 実行環境

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-014 |
| 要件名 | 実行環境 |
| 優先度 | 必須 |

**要件：**
- Webサーバーなしでローカルファイルとして実行可能とする
- 静的ファイルのみで構成する
- ビルドプロセスを不要とする

---

## 7. 計算精度要件

### NFR-015: 数値精度

| 項目 | 内容 |
|------|------|
| 要件ID | NFR-015 |
| 要件名 | 数値精度 |
| 優先度 | 必須 |

**要件：**
- JavaScriptの倍精度浮動小数点（IEEE 754）に準拠する
- 表示桁数は有効数字15桁までとする
- 浮動小数点誤差が発生する場合、適切に丸める（例：0.1 + 0.2 = 0.3）

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 変更者 |
|------|------------|----------|--------|
| 2025-12-11 | 1.0 | 初版作成 | Claude Code |
