# 業務要件定義書

## 文書情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | Multi-Mode Calculator |
| 文書バージョン | 1.0 |
| 作成日 | 2025-12-11 |
| 最終更新日 | 2025-12-11 |

---

## 1. 業務概要

### 1.1 業務の目的

本システムは、ユーザーが以下の計算業務を効率的に行うためのWebアプリケーションである。

1. **日常計算** - 買い物、割り勘、パーセント計算などの一般的な計算
2. **科学計算** - 三角関数、対数、指数計算などの学術・技術的な計算
3. **プログラミング支援** - 進数変換、ビット演算、ASCII変換などの開発者向け計算

### 1.2 業務フロー

```
┌──────────────────────────────────────────────────────────┐
│                    ユーザー業務フロー                      │
└──────────────────────────────────────────────────────────┘

[開始] → [モード選択] → [計算入力] → [結果確認] → [終了]
              │              │            │
              │              │            └─→ [履歴保存]
              │              │                    │
              │              └─────────←─────────┘
              │                      (再計算)
              └─────────────←────────────────────┘
                        (モード変更)
```

---

## 2. ユースケース

### UC-001: 標準電卓で計算を行う

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-001 |
| ユースケース名 | 標準電卓で計算を行う |
| アクター | ユーザー |
| 事前条件 | システムがブラウザで開かれている |
| 事後条件 | 計算結果が表示され、履歴に保存される |

**基本フロー：**
1. ユーザーがシステムを開く
2. システムが標準電卓モードを表示する（デフォルト）
3. ユーザーが数値を入力する
4. ユーザーが演算子（＋−×÷）を選択する
5. ユーザーが次の数値を入力する
6. ユーザーが「=」を押下する
7. システムが計算結果を表示する
8. システムが計算式と結果を履歴に保存する

**代替フロー：**
- 3a. ユーザーがキーボードで数値を入力する
- 6a. ユーザーがEnterキーを押下する
- 7a. 計算エラーの場合、システムがエラーメッセージを表示する

---

### UC-002: 関数電卓で科学計算を行う

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-002 |
| ユースケース名 | 関数電卓で科学計算を行う |
| アクター | ユーザー |
| 事前条件 | システムがブラウザで開かれている |
| 事後条件 | 計算結果が表示され、履歴に保存される |

**基本フロー：**
1. ユーザーが関数電卓モードを選択する
2. システムが関数電卓のUIを表示する
3. ユーザーが関数（sin, cos, log等）を選択する
4. ユーザーが数値を入力する
5. ユーザーが「=」を押下する
6. システムが計算結果を表示する

**代替フロー：**
- 3a. ユーザーが累乗計算（x^y）を行う場合、底と指数を入力する
- 3b. ユーザーがルート計算を行う場合、被開平数を入力する

---

### UC-003: プログラマ電卓で進数変換を行う

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-003 |
| ユースケース名 | プログラマ電卓で進数変換を行う |
| アクター | ユーザー（開発者） |
| 事前条件 | システムがブラウザで開かれている |
| 事後条件 | 変換結果が表示される |

**基本フロー：**
1. ユーザーがプログラマ電卓モードを選択する
2. システムがプログラマ電卓のUIを表示する
3. ユーザーが入力進数（2/8/10/16）を選択する
4. ユーザーが数値を入力する
5. システムが全進数（2進数、8進数、10進数、16進数）での値を同時に表示する

---

### UC-004: 16進数をASCII文字に変換する

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-004 |
| ユースケース名 | 16進数をASCII文字に変換する |
| アクター | ユーザー（開発者） |
| 事前条件 | プログラマ電卓モードが選択されている |
| 事後条件 | ASCII文字が表示される |

**基本フロー：**
1. ユーザーがASCII変換機能を選択する
2. ユーザーが16進数値を入力する（例：48 65 6C 6C 6F）
3. システムが対応するASCII文字を表示する（例：Hello）

**代替フロー：**
- 2a. ユーザーがASCII文字を入力し、16進数に変換する

---

### UC-005: 計算履歴を利用する

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-005 |
| ユースケース名 | 計算履歴を利用する |
| アクター | ユーザー |
| 事前条件 | 過去の計算履歴が存在する |
| 事後条件 | 履歴の値が入力欄に反映される |

**基本フロー：**
1. ユーザーが履歴パネルを開く
2. システムが過去の計算履歴を一覧表示する
3. ユーザーが履歴項目を選択する
4. システムが選択した計算の結果値を入力欄に反映する

---

### UC-006: テーマ・モードを変更する

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-006 |
| ユースケース名 | テーマ・モードを変更する |
| アクター | ユーザー |
| 事前条件 | システムがブラウザで開かれている |
| 事後条件 | 選択したテーマ・モードが適用され、設定が保存される |

**基本フロー：**
1. ユーザーが設定メニューを開く
2. システムがテーマ一覧（10種類）を表示する
3. ユーザーがテーマを選択する
4. システムが選択したテーマを即座に適用する
5. ユーザーがライト/ダークモードを切り替える
6. システムがモードを即座に切り替える
7. システムが設定をローカルストレージに保存する

---

## 3. 業務ルール

### BR-001: 計算精度

| 項目 | 内容 |
|------|------|
| ルールID | BR-001 |
| ルール名 | 計算精度 |
| 説明 | システムはJavaScriptの浮動小数点演算精度（IEEE 754倍精度）に準拠する |
| 適用範囲 | 全計算モード |

### BR-002: 履歴保存上限

| 項目 | 内容 |
|------|------|
| ルールID | BR-002 |
| ルール名 | 履歴保存上限 |
| 説明 | 計算履歴は最大100件まで保存する。100件を超えた場合、最も古い履歴から削除する |
| 適用範囲 | 全計算モード |

### BR-003: 入力桁数制限

| 項目 | 内容 |
|------|------|
| ルールID | BR-003 |
| ルール名 | 入力桁数制限 |
| 説明 | 一度の入力で扱える数値は最大15桁とする |
| 適用範囲 | 全計算モード |

### BR-004: ゼロ除算

| 項目 | 内容 |
|------|------|
| ルールID | BR-004 |
| ルール名 | ゼロ除算 |
| 説明 | ゼロで除算した場合、システムは「Error」と表示する |
| 適用範囲 | 全計算モード |

### BR-005: 設定永続化

| 項目 | 内容 |
|------|------|
| ルールID | BR-005 |
| ルール名 | 設定永続化 |
| 説明 | テーマ設定、ライト/ダークモード設定はブラウザのローカルストレージに保存し、次回アクセス時に復元する |
| 適用範囲 | 設定機能 |

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 変更者 |
|------|------------|----------|--------|
| 2025-12-11 | 1.0 | 初版作成 | Claude Code |
