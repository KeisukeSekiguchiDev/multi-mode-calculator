# 画面設計書: SCR-006 ASCII変換パネル

## 基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-006 |
| 画面名 | ASCII変換パネル |
| 対応機能要件 | FR-PRG-005 |
| 作成日 | 2025-12-11 |
| 更新日 | 2025-12-11 |
| 作成者 | Claude Code |

---

## 画面レイアウト

```
┌─────────────────────────────────────────────────────────────┐
│  ASCII変換                                             [×]  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ■ 変換モード                                               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │   ● HEX → ASCII        ○ ASCII → HEX               │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ■ 入力                                                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  48 65 6C 6C 6F 20 57 6F 72 6C 64                  │   │
│  │                                                     │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ■ 出力                                                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  Hello World                                        │   │
│  │                                                     │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│    [変換]        [クリア]        [📋 コピー]               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 画面項目一覧

### ヘッダー

| No | 項目ID | 項目名 | 種別 | 説明 |
|----|--------|--------|------|------|
| 1 | SCR006_lbl_title | タイトル | ラベル | 「ASCII変換」を表示 |
| 2 | SCR006_btn_close | 閉じるボタン | ボタン | パネルを閉じる |

### 変換モード選択

| No | 項目ID | 項目名 | 種別 | 初期値 | 説明 |
|----|--------|--------|------|--------|------|
| 3 | SCR006_rb_hex2ascii | HEX→ASCII | ラジオ | 選択 | 16進数をASCIIに変換 |
| 4 | SCR006_rb_ascii2hex | ASCII→HEX | ラジオ | 非選択 | ASCIIを16進数に変換 |

### 入出力エリア

| No | 項目ID | 項目名 | 種別 | 最大長 | 説明 |
|----|--------|--------|------|--------|------|
| 5 | SCR006_ta_input | 入力エリア | テキストエリア | 1000文字 | 変換元の値を入力 |
| 6 | SCR006_ta_output | 出力エリア | テキストエリア | - | 変換結果を表示（読取専用） |

### 操作ボタン

| No | 項目ID | 項目名 | 種別 | 説明 |
|----|--------|--------|------|------|
| 7 | SCR006_btn_convert | 変換 | ボタン | 変換を実行 |
| 8 | SCR006_btn_clear | クリア | ボタン | 入出力をクリア |
| 9 | SCR006_btn_copy | コピー | ボタン | 出力をクリップボードにコピー |

---

## アクション定義

### 変換モード切り替え

| No | トリガー | アクション | 結果 |
|----|---------|-----------|------|
| 1 | HEX→ASCII選択 | モードを切り替え | プレースホルダー更新 |
| 2 | ASCII→HEX選択 | モードを切り替え | プレースホルダー更新 |
| 3 | モード切替時 | 入出力エリアをクリア | フィールドリセット |

### 変換実行

| No | トリガー | アクション | 結果 |
|----|---------|-----------|------|
| 4 | 変換ボタン押下 | 選択中のモードで変換 | 出力エリアに結果表示 |
| 5 | 入力エリアでEnter | 変換を実行 | 出力エリアに結果表示 |

### その他操作

| No | トリガー | アクション | 結果 |
|----|---------|-----------|------|
| 6 | クリアボタン押下 | 入出力エリアをクリア | フィールドリセット |
| 7 | コピーボタン押下 | 出力値をクリップボードにコピー | コピー完了トースト表示 |
| 8 | 閉じるボタン押下 | パネルを閉じる | パネル非表示 |

---

## 変換ロジック

### HEX → ASCII変換

#### 入力形式

| 形式 | 例 | 説明 |
|------|-----|------|
| スペース区切り | `48 65 6C 6C 6F` | 2文字ずつスペースで区切り |
| 連続入力 | `48656C6C6F` | スペースなしで連続 |
| 混在 | `48 656C 6C6F` | 混在も許容 |

#### 変換処理

```javascript
// 入力例: "48 65 6C 6C 6F"
// 1. スペースを削除
// 2. 2文字ずつ分割: ["48", "65", "6C", "6C", "6F"]
// 3. 各値を16進数として解釈: [72, 101, 108, 108, 111]
// 4. 文字コードを文字に変換: "Hello"
```

#### 出力形式

- 印字可能文字（0x20〜0x7E）: そのまま表示
- 制御文字（0x00〜0x1F, 0x7F）: `.`（ピリオド）で表示

### ASCII → HEX変換

#### 入力形式

- 任意のASCII文字列

#### 変換処理

```javascript
// 入力例: "Hello"
// 1. 各文字の文字コードを取得: [72, 101, 108, 108, 111]
// 2. 16進数に変換: ["48", "65", "6C", "6C", "6F"]
// 3. スペース区切りで結合: "48 65 6C 6C 6F"
```

#### 出力形式

- 大文字16進数
- スペース区切り

---

## バリデーションルール

### HEX → ASCII

| ルール | 動作 |
|--------|------|
| 有効な16進数文字のみ | 無効な文字はエラー表示 |
| 偶数文字数 | 奇数の場合、先頭に0を補完 |

### ASCII → HEX

| ルール | 動作 |
|--------|------|
| ASCII範囲（0x00〜0x7F） | 範囲外の文字はスキップ |

---

## エラーハンドリング

| エラーコード | 発生条件 | メッセージ | 対処 |
|-------------|---------|-----------|------|
| ERR-ASC-001 | 無効な16進数文字 | 「無効な16進数が含まれています」 | 入力を修正 |
| ERR-ASC-002 | 入力が空 | 「入力してください」 | 値を入力 |
| ERR-ASC-003 | コピー失敗 | 「コピーに失敗しました」 | 手動でコピー |

---

## プレースホルダーテキスト

| モード | 入力プレースホルダー | 出力プレースホルダー |
|--------|---------------------|---------------------|
| HEX→ASCII | `48 65 6C 6C 6F（16進数を入力）` | `変換結果がここに表示されます` |
| ASCII→HEX | `Hello（ASCII文字を入力）` | `変換結果がここに表示されます` |

---

## ASCIIコード参照表（表示用）

### 印字可能文字（0x20〜0x7E）

| 範囲 | 内容 |
|------|------|
| 0x20 | スペース |
| 0x21〜0x2F | 記号（! " # $ % & ' ( ) * + , - . /） |
| 0x30〜0x39 | 数字（0-9） |
| 0x3A〜0x40 | 記号（: ; < = > ? @） |
| 0x41〜0x5A | 大文字（A-Z） |
| 0x5B〜0x60 | 記号（[ \ ] ^ _ `） |
| 0x61〜0x7A | 小文字（a-z） |
| 0x7B〜0x7E | 記号（{ | } ~） |

### 制御文字（0x00〜0x1F）

- 変換時は `.` で表示

---

## 補足事項

1. **リアルタイム変換**: 入力中に自動変換するオプション（将来実装候補）
2. **改行対応**: 改行（0x0A）も変換対象として扱う
3. **文字数表示**: 入力文字数/バイト数をリアルタイム表示
4. **履歴**: 変換結果は電卓の計算履歴には追加しない

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 変更者 |
|------|------------|----------|--------|
| 2025-12-11 | 1.0 | 初版作成 | Claude Code |
